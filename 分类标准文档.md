# 软件成分多维度分类标准文档

## 1. 概述

本文档定义了CodeCanvas使用的多维度软件成分分类系统，用于明确区分不同类型的技术栈和组件，确保分类的一致性和可扩展性。

## 2. 分类维度

### 2.1 核心分类（Category）

所有检测到的技术项（框架或组件）都归属于以下三大核心分类之一：

| 分类 | 标识符 | 描述 | 包含内容示例 |
|------|--------|------|--------------|
| **前端技术栈** | `frontend` | 运行在浏览器或客户端界面层的代码 | React, Vue, jQuery, Tailwind CSS, Axios (前端使用) |
| **后端技术栈** | `backend` | 运行在服务器端的逻辑代码 | Spring Boot, Gin, Django, MySQL Driver, Log4j |
| **桌面应用** | `desktop` | 用于构建本地桌面应用程序的技术 | Electron, Tauri, Wails, Fyne, Qt |

### 2.2 编程语言类型

| 分类 | 描述 | 示例 |
|------|------|------|
| **前端语言** | 主要用于前端开发的语言 | JavaScript, TypeScript, HTML, CSS, SCSS, Less, Vue, Svelte |
| **后端语言** | 主要用于后端开发的语言 | Java, Python, Go, C#, PHP, Ruby, Kotlin, Scala, Rust |
| **通用语言** | 可用于前端和后端的语言 | JavaScript, TypeScript (Node.js) |

### 2.3 框架类型

| 分类 | 描述 | 示例 |
|------|------|------|
| **前端框架** | 用于构建用户界面的框架 | React, Vue.js, Angular, Svelte, Next.js |
| **后端框架** | 用于构建服务器端应用的框架 | Spring Boot, Django, Flask, Express, Gin |
| **桌面框架** | 用于构建桌面应用的框架 | Electron, Wails, Fyne |

## 3. 分类规则

### 3.1 前端 (frontend) 判断规则

1. **运行环境**：代码主要运行在浏览器端。
2. **功能定位**：负责用户界面(UI)、用户交互、页面渲染。
3. **典型技术**：
   - 框架：React, Vue, Angular
   - 库/组件：Lodash (前端使用), Axios, Redux, Tailwind
   - 语言：HTML, CSS, JavaScript (Browser)

### 3.2 后端 (backend) 判断规则

1. **运行环境**：代码主要运行在服务器端。
2. **功能定位**：负责业务逻辑、数据处理、API接口、数据库交互。
3. **典型技术**：
   - 框架：Spring Boot, Gin, Django, Express, NestJS
   - 库/组件：Log4j, Jackson, GORM, JDBC Drivers
   - 语言：Java, Go, Python, PHP

### 3.3 桌面 (desktop) 判断规则

1. **运行环境**：代码运行在本地操作系统上，作为独立应用程序。
2. **功能定位**：提供原生桌面体验，通常包含GUI。
3. **典型技术**：
   - 框架：Electron, Tauri, Wails, Fyne, Qt, JavaFX

## 4. 分类实现

### 4.1 数据结构

系统使用统一的 `DetectedItem` 结构体来表示检测到的框架和组件：

```go
// DetectedItem represents a detected technology item (framework or component).
type DetectedItem struct {
	Name       string `json:"name"`       // e.g., "gin", "log4j-checker", "wails"
	Type       string `json:"type"`       // "framework" or "component"
	Language   string `json:"language"`   // e.g., "Go", "Java", "JavaScript"
	Version    string `json:"version"`    // Version string, may be empty
	Category   string `json:"category"`   // "frontend" | "backend" | "desktop"
	Confidence string `json:"confidence"` // "high" | "medium" | "low"
	Evidence   string `json:"evidence"`   // human-readable detection reason
}
```

### 4.2 规则定义

在YAML规则文件中，通过 `category` 字段指定分类：

```yaml
# 前端框架示例
- name: "React"
  type: "framework"
  language: "JavaScript"
  category: "frontend"
  levels:
    L1:
      paths: ["package.json"]
      contains: ["react"]

# 后端框架示例
- name: "Gin"
  type: "framework"
  language: "Go"
  category: "backend"
  levels:
    L1:
      paths: ["go.mod"]
      contains: ["github.com/gin-gonic/gin"]

# 桌面框架示例
- name: "Electron"
  type: "framework"
  language: "JavaScript"
  category: "desktop"
  levels:
    L1:
      paths: ["package.json"]
      contains: ["electron"]

# 后端组件示例
- name: "Log4j"
  type: "component"
  language: "Java"
  category: "backend"
  levels:
    L1:
      paths: ["pom.xml"]
      contains: ["log4j-checker"]
```

## 5. 扩展机制

### 5.1 添加新分类

目前系统固定支持 `frontend`, `backend`, `desktop` 三种分类。如需扩展：

1. 在 `internal/canvas/types.go` 中添加新的常量定义。
2. 更新 `main.go` 中的输出逻辑以支持新分类的展示。
3. 更新分类标准文档。

### 5.2 修改分类规则

要修改分类规则：

1. 更新规则文件（如 `internal/embeds/*.yml`）中的 `category` 字段。
2. 确保分类符合上述定义的判断规则。

